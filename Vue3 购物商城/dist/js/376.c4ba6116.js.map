{"version":3,"file":"js/376.c4ba6116.js","mappings":"+NAQAA,EAAe,CACbC,KAAM,aAGKC,EAAiBA,KAC5B,MAAMC,GAAYC,EAAAA,EAAAA,IAAS,CACzBC,MAAM,EACNC,aAAc,KAGVC,EAAaC,IACjBL,EAAUE,MAAO,EACjBF,EAAUG,aAAeE,EACzBC,YAAW,KACTN,EAAUE,MAAO,EACjBF,EAAUG,aAAe,EAAE,GAC1B,IAAK,GAGJ,KAAED,EAAI,aAAEC,IAAiBI,EAAAA,EAAAA,IAAOP,GAEtC,MAAO,CAAEE,OAAMC,eAAcC,YAAW,E,+HCvB1C,MAAMI,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O,2XC8BAX,EAAe,CACbC,KAAM,a,gCAjCR,MAAMW,GAASC,EAAAA,EAAAA,MAETC,GAAOV,EAAAA,EAAAA,IAAS,CACpBW,SAAU,GACVC,SAAU,MAGN,KAAEX,EAAI,aAAEC,EAAY,UAAEC,IAAcL,EAAAA,EAAAA,KAE1Ce,eAAeC,IACb,IACE,MAAMC,QAAeC,EAAAA,EAAAA,GAAK,kBAAmB,CAC3CL,SAAUD,EAAKC,SACfC,SAAUF,EAAKE,WAEK,IAAlBG,GAAQE,OACVC,aAAaC,SAAU,EACvBX,EAAOY,KAAK,CAAEvB,KAAM,UAEpBM,EAAU,OAEd,CAAE,MAAOkB,GACPlB,EAAU,OACZ,CACF,CAEA,SAASmB,IACPd,EAAOY,KAAK,CAAEvB,KAAM,YACtB,C,2qBC5BA,MAAMU,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://jingdong/./src/components/Toast.vue","webpack://jingdong/./src/components/Toast.vue?44c7","webpack://jingdong/./src/views/Login/Login.vue","webpack://jingdong/./src/views/Login/Login.vue?682b"],"sourcesContent":["<script setup>\nimport { defineProps, reactive, toRefs } from 'vue'\n\ndefineProps(['message'])\n\n</script>\n\n<script>\nexport default {\n  name: 'ToastView'\n}\n\nexport const useToastEffect = () => {\n  const toastData = reactive({\n    show: false,\n    toastMessage: ''\n  })\n\n  const showToast = (message) => {\n    toastData.show = true\n    toastData.toastMessage = message\n    setTimeout(() => {\n      toastData.show = false\n      toastData.toastMessage = ''\n    }, 2000)\n  }\n\n  const { show, toastMessage } = toRefs(toastData)\n\n  return { show, toastMessage, showToast }\n}\n</script>\n\n<template>\n  <div class=\"toast\">{{ message }}</div>\n</template>\n\n<style lang=\"scss\" scoped>\n.toast {\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  padding: .1rem;\n  background: rgba(0, 0, 0, .35);\n  border-radius: .05rem;\n  color: #FFF;\n}\n</style>\n","import script from \"./Toast.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Toast.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Toast.vue?vue&type=style&index=0&id=47d92612&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-47d92612\"]])\n\nexport default __exports__","<script setup>\r\nimport { reactive } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { post } from '../../utils/request.js'\r\nimport Toast, { useToastEffect } from '../../components/Toast.vue'\r\n\r\nconst router = useRouter() // should be a global variable in <script setup>\r\n\r\nconst data = reactive({\r\n  username: '',\r\n  password: ''\r\n})\r\n\r\nconst { show, toastMessage, showToast } = useToastEffect()\r\n\r\nasync function handleLogin () {\r\n  try {\r\n    const result = await post('/api/user/login', {\r\n      username: data.username,\r\n      password: data.password\r\n    })\r\n    if (result?.errno === 0) {\r\n      localStorage.isLogin = true\r\n      router.push({ name: 'Home' })\r\n    } else {\r\n      showToast('登录失败')\r\n    }\r\n  } catch (e) {\r\n    showToast('请求失败')\r\n  }\r\n}\r\n\r\nfunction handleRegister () {\r\n  router.push({ name: 'Register' })\r\n}\r\n</script>\r\n\r\n<script>\r\nexport default {\r\n  name: 'LoginView'\r\n}\r\n</script>\r\n\r\n<template>\r\n    <div class=\"wrapper\">\r\n      <img class=\"wrapper__img\" src=\"http://www.dell-lee.com/imgs/vue3/user.png\"/>\r\n      <div class=\"wrapper__input\">\r\n        <input\r\n          class=\"wrapper__input__content\"\r\n          placeholder=\"用户名\"\r\n          v-model=\"data.username\"\r\n        />\r\n      </div>\r\n      <div class=\"wrapper__input\">\r\n        <input\r\n          type=\"password\"\r\n          class=\"wrapper__input__content\"\r\n          placeholder=\"请输入密码\"\r\n          v-model=\"data.password\"\r\n        />\r\n      </div>\r\n      <div class=\"wrapper__login-button\" @click=\"handleLogin\">登陆</div>\r\n      <div class=\"wrapper__login-link\" @click=\"handleRegister\">立即注册</div>\r\n    </div>\r\n    <Toast v-if=\"show\" :message=\"toastMessage\"/>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/variables.scss';\r\n.wrapper {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 0;\r\n  right: 0;\r\n  transform: translateY(-50%);\r\n  &__img {\r\n    display: block;            // <img> has \"display:inline\" by default => margin only applies to block element ?\r\n    margin: 0 auto .4rem auto; // left/right marign set to \"auto\" for centering the image\r\n    width: .66rem;\r\n    height: .66rem;\r\n  }\r\n  &__input {\r\n    height: .48rem;\r\n    margin: 0 .4rem .16rem .4rem;\r\n    padding: 0 .16rem;\r\n    background: #F9F9F9;\r\n    border: 1px solid rgba(0,0,0,0.10);\r\n    border-radius: 6px;\r\n    border-radius: 6px;\r\n    &__content {\r\n      line-height: .48rem;\r\n      border: none;\r\n      outline: none;\r\n      width: 100%;\r\n      background: none;\r\n      color: $content-notice-fontcolor;\r\n      &::placeholder {\r\n        color: $content-notice-fontcolor;\r\n        font-size: .16rem;\r\n      }\r\n    }\r\n  }\r\n  &__login-button {\r\n    margin: .32rem .4rem .16rem .4rem;\r\n    line-height: .48rem;\r\n    background: #0091FF;\r\n    box-shadow: 0 .04rem .08rem 0 rgba(0,145,255,0.32);\r\n    border-radius: .04rem;\r\n    // border-radius: .04rem;\r\n    color: #fff;\r\n    font-size: .16rem;\r\n    text-align: center;\r\n  }\r\n  &__login-link {\r\n    text-align: center;\r\n    font-size: .14rem;\r\n    color: $content-notice-fontcolor;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./Login.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Login.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=7e1f2d42&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7e1f2d42\"]])\n\nexport default __exports__"],"names":["__default__","name","useToastEffect","toastData","reactive","show","toastMessage","showToast","message","setTimeout","toRefs","__exports__","router","useRouter","data","username","password","async","handleLogin","result","post","errno","localStorage","isLogin","push","e","handleRegister"],"sourceRoot":""}